(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{500:function(t,e,s){"use strict";s.r(e);var n=s(1),a=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("blockquote",[e("p",[t._v("Jenkins自动化部署中踩的坑")])]),t._v(" "),e("h2",{attrs:{id:"jenkins-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装"}},[t._v("#")]),t._v(" Jenkins 安装")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/Ginny97/article/details/103984312",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Linux】yum安装Jenkins与卸载（简单方便）"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/wjup/p/11041274.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("【linux】安装java步骤"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"title"}),e("p",[t._v("前提要安装Java，版本至少8，推荐11")])]),e("h2",{attrs:{id:"jenkins-实操"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-实操"}},[t._v("#")]),t._v(" Jenkins 实操")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.cn/post/6844903591417757710",target:"_blank",rel:"noopener noreferrer"}},[t._v("实战笔记：Jenkins打造强大的前端自动化工作流"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("安装 Generic Webhook Trigger Plugin插件,WEB Hook URL :")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("http://"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("User ID"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("API Token"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("@"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Jenkins IP地址"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(":端口/generic-webhook-trigger/invoke\n")])])]),e("blockquote",[e("p",[t._v("安装 Publish Over SSH 插件，系统管理-系统设置里找到Publish over SSH这一项：")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"}),e("p",[t._v("Passphrase：密码（key的密码，没设置就是空）")]),t._v(" "),e("p",[t._v("Path to key：key文件（私钥）的路径")]),t._v(" "),e("p",[t._v("Key：将私钥复制到这个框中(path to key和key写一个即可)")]),t._v(" "),e("p",[t._v("SSH Servers的配置：")]),t._v(" "),e("p",[t._v("SSH Server Name：标识的名字（随便你取什么）")]),t._v(" "),e("p",[t._v("Hostname：需要连接ssh的主机名或ip地址（建议ip）")]),t._v(" "),e("p",[t._v("Username：用户名")]),t._v(" "),e("p",[t._v("Remote Directory：远程目录（上面第二步建的testjenkins文件夹的路径）")])]),e("h3",{attrs:{id:"ssh-密钥登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh-密钥登录"}},[t._v("#")]),t._v(" SSH 密钥登录")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://wangdoc.com/ssh/key.html#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSH 密钥登录(用于git中免用户名密码的认证)"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/aachangs/article/details/80869833",target:"_blank",rel:"noopener noreferrer"}},[t._v("windows 10 git配置.ssh秘钥"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"title"}),e("p",[t._v("目前Gtihub已弃用用户名&密码的认证方式")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"}),e("p",[t._v("首先 cd ~/.ssh 查看是否有密钥")]),t._v(" "),e("p",[t._v("概括 ：ssh-keygen 后一路回车，带pub结尾的是公钥，不带的是私钥")])]),e("h3",{attrs:{id:"jenkins-tips"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-tips"}},[t._v("#")]),t._v(" Jenkins Tips")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"}),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_44049466/article/details/102023452?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1.no_search_link&spm=1001.2101.3001.4242.2",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins忘记密码怎么操作"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/ziwuzhulin/article/details/79820020",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins系列_插件安装及报错处理（缺少插件可以手动安装）"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_41824658/article/details/88965634",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSH connection Error(手动再次输入用户名密码)"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/u010947098/article/details/60965469",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins 指定gitlab上的源码时，提示无权限"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_40123451/article/details/113203225",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins jenkins添加sudo的执行权限"),e("OutboundLink")],1)])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"title"}),e("p",[t._v("最后这条比较重要，因为Jenkins用户没有sudo权限")])]),e("h3",{attrs:{id:"linux安装nodejs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux安装nodejs"}},[t._v("#")]),t._v(" linux安装nodeJs")]),t._v(" "),e("blockquote",[e("p",[t._v("一般对root用户有效，jenkins用户需额外设置")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://nodejs.org/dist/v16.13.1/node-v16.13.1-linux-x64.tar.xz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-xvf")]),t._v(" node-v16.13.1-linux-x64.tar.xz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" ./node-v16.13.1-linux-x64 /usr/local/node\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /usr/local/node/bin/node /usr/bin/node\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /usr/local/node/bin/npm /usr/bin/npm\n")])])]),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/Kennytian/p/6391481.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 NVM 管理不同的 Node.js 版本(对Jenkins用户无效)"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/0a865a321d78",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jenkins---jenkins中安装nodejs(利用插件)"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"serve-部署相关"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#serve-部署相关"}},[t._v("#")]),t._v(" serve 部署相关")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.jianshu.com/p/4eaad2163567",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Windows】PowerShell：因为在此系统上禁止运行脚本，解决方法"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.npmjs.com/package/serve",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serve - Npm"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_28993311/article/details/116964001",target:"_blank",rel:"noopener noreferrer"}},[t._v("linux系统安装yarn"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/weixin_36816337/article/details/82055217",target:"_blank",rel:"noopener noreferrer"}},[t._v("jenkins Process leaked file descriptors(Jenkins会默认杀掉所有衍生进程)"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"title"}),e("p",[t._v("以下Shell命令仅供参考：")])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin master\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build \n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BUILD_ID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dontKillMe "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Jenkins默认会杀掉所有衍生进程，需要标识")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("nohup")]),t._v(" /usr/local/bin/serve "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("run.out "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Jenkins走的绝对路径，否则会报错的")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n")])])]),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"title"}),e("p",[t._v("Jenkins默认会杀掉所有衍生进程，需要标识")])])])}),[],!1,null,null,null);e.default=a.exports}}]);